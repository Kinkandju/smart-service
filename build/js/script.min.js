
"use strict";var KEY_CODE=27,buttonOpen=document.querySelector(".contacts__open-modal"),overlay=document.querySelector(".overlay"),popup=document.querySelector(".page-footer__modal"),buttonClose=popup.querySelector(".modal__button--close"),form=popup.querySelector(".modal__form"),nameInput=popup.querySelector(".modal__name--input"),telInput=popup.querySelector(".modal__tel--input"),messageInput=popup.querySelector(".modal__question--input"),isStorageSupport=!0,storageName="",storageTel="",storageMessage="";try{storageName=localStorage.getItem("nameInput"),storageTel=localStorage.getItem("telInput"),storageMessage=localStorage.getItem("messageInput")}catch(e){isStorageSupport=!1}isStorageSupport&&(storageName&&(nameInput.value=storageName),storageTel&&(telInput.value=storageTel),storageMessage&&(messageInput.innerText=storageMessage));var onEscPress=function(e){e.keyCode===KEY_CODE&&(e.preventDefault(),closePopup())},openPopup=function(){popup.classList.add("modal--show"),overlay.classList.add("overlay--show"),document.addEventListener("keydown",onEscPress)},closePopup=function(){popup.classList.remove("modal--show"),popup.classList.remove("modal--error"),overlay.classList.remove("overlay--show"),document.removeEventListener("keydown",onEscPress)};buttonOpen.addEventListener("click",function(e){e.preventDefault(),nameInput.value?nameInput.value&&!telInput.value?telInput.focus():nameInput.value&&telInput.value&&!messageInput.value?messageInput.focus():(localStorage.setItem("nameInput",nameInput.value),localStorage.setItem("telInput",telInput.value),localStorage.setItem("messageInput",messageInput.value)):nameInput.focus(),openPopup()}),buttonClose.addEventListener("click",function(e){e.preventDefault(),closePopup()}),overlay.addEventListener("click",function(e){e.preventDefault(),closePopup()}),form.addEventListener("submit",function(e){nameInput.value&&telInput.value&&messageInput.value?isStorageSupport&&(localStorage.setItem("nameInput",nameInput.value),localStorage.setItem("telInput",telInput.value),localStorage.setItem("messageInput",messageInput.value)):(e.preventDefault(),popup.classList.remove("modal--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal--error"))});for(var linkAnchors=document.querySelectorAll('[href^="#"]'),i=0;i<linkAnchors.length;i++)linkAnchors[i].addEventListener("click",function(e){e.preventDefault();var t,o=document.querySelector(e.currentTarget.href.replace(/[^#]*(.*)/,"$1")),e=window.navigator.userAgent,n=e.indexOf("MSIE "),a=e.indexOf("Trident/");t=!1==(-1<n||-1<a)?o.getBoundingClientRect().y:o.getBoundingClientRect().top;var u,r,s=window.pageYOffset;u={duration:2e3,timing:function(e){return e},draw:function(e){window.scrollTo(0,s+e*t)}},r=performance.now(),requestAnimationFrame(function e(t){var o=(t-r)/u.duration;1<o&&(o=1);t=u.timing(o);u.draw(t),o<1&&requestAnimationFrame(e)})});