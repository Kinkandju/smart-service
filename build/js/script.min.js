
"use strict";var KEY_CODE=27,buttonOpen=document.querySelector(".contacts__open-modal"),overlay=document.querySelector(".overlay"),popup=document.querySelector(".page-footer__modal"),buttonClose=popup.querySelector(".modal__button--close"),form=popup.querySelector(".modal__form"),nameInput=popup.querySelector(".modal__name--input"),telInput=popup.querySelector(".modal__tel--input"),messageInput=popup.querySelector(".modal__question--input"),isStorageSupport=!0,storageName="",storageTel="",storageMessage="";try{storageName=localStorage.getItem("nameInput"),storageTel=localStorage.getItem("telInput"),storageMessage=localStorage.getItem("messageInput")}catch(e){isStorageSupport=!1}isStorageSupport&&(storageName&&(nameInput.value=storageName),storageTel&&(telInput.value=storageTel),storageMessage&&(messageInput.innerText=storageMessage));var onEscPress=function(e){e.keyCode===KEY_CODE&&(e.preventDefault(),closePopup())},openPopup=function(){popup.classList.add("modal--show"),overlay.classList.add("overlay--show"),document.body.style.overflow="hidden",document.addEventListener("keydown",onEscPress)},closePopup=function(){popup.classList.remove("modal--show"),popup.classList.remove("modal--error"),overlay.classList.remove("overlay--show"),document.body.style.overflow="",document.removeEventListener("keydown",onEscPress)};buttonOpen.addEventListener("click",function(e){e.preventDefault(),nameInput.value?nameInput.value&&!telInput.value?telInput.focus():nameInput.value&&telInput.value&&!messageInput.value?messageInput.focus():(localStorage.setItem("nameInput",nameInput.value),localStorage.setItem("telInput",telInput.value),localStorage.setItem("messageInput",messageInput.value)):nameInput.focus(),openPopup()}),buttonClose.addEventListener("click",function(e){e.preventDefault(),closePopup()}),overlay.addEventListener("click",function(e){e.preventDefault(),closePopup()}),form.addEventListener("submit",function(e){nameInput.value&&telInput.value&&messageInput.value?isStorageSupport&&(localStorage.setItem("nameInput",nameInput.value),localStorage.setItem("telInput",telInput.value),localStorage.setItem("messageInput",messageInput.value)):(e.preventDefault(),popup.classList.remove("modal--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal--error"))});